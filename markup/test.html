<html>
<head>

<!--
-->
<style>
 
	#UID {
		width:50%;
	}
	#SCOPE{
		width: 100%;
		height:5em;
		}
	#HTML{
		background: pink;
	}		
		
	#TITLE{
		width: 100%;
	}
	
	#drop {
	  min-height: 50px;
	  width: 50px;
	  border: 1px solid blue;
	  margin: 10px;
	  padding: 10px;
	}
	
</style>
<link rel="stylesheet" type="text/css" href="../stylesheets/guidance.css" title="best">
<link rel="stylesheet" type="text/css" href="../stylesheets/hotdrop.css" title="best">
<script src="jmarked.js"       type="text/javascript"></script>
<script src="jexport.js"       type="text/javascript"></script>
<script src="epiceditor/js/epiceditor.js"       type="text/javascript"></script>
 
		
<script type="text/javascript">
	var editor;

	function loadEditor(){
		var opts = {
		  container: 'epiceditor',
		  textarea: null,
		  basePath: 'epiceditor',
		  clientSideStorage: true,
		  localStorageName: 'epiceditor',
		  useNativeFullscreen: true,
		  parser:   jmarked,
		  file: {
			name: 'epiceditor',
			defaultContent: '',
			autoSave: 100
		  },
		  theme: {
			base: '/themes/base/epiceditor.css',
			preview: '/themes/preview/preview-dark.css',
			editor: '/themes/editor/epic-dark.css'
		  },
		  button: {
			preview: true,
			fullscreen: true,
			bar: "auto"
		  },
		  focusOnLoad: false,
		  shortcut: {
			modifier: 18,
			fullscreen: 70,
			preview: 80
		  },
		  string: {
			togglePreview: 'Toggle Preview Mode',
			toggleEdit: 'Toggle Edit Mode',
			toggleFullscreen: 'Enter Fullscreen'
		  },
		  autogrow: true
		}
	editor = new EpicEditor(opts);
	editor.load();
	}
	
	window.onload = loadWindow;
	
	
	function loadWindow(){
		loadEditor();
		loadExport();
		}
		
	
	function addEventHandler(obj, evt, handler) {
		if(obj.addEventListener) {
			// W3C method
			obj.addEventListener(evt, handler, false);
		} else if(obj.attachEvent) {
			// IE method.
			obj.attachEvent('on'+evt, handler);
		} else {
			// Old school method.
			obj['on'+evt] = handler;
    }
}
</script>

 

	




</head>

<body>
<!--
-->
 
<p>
<span id="drop">Drop files here.</span>
<button type="button" onclick="clearFields()">Clear</button>
<input type="file" id="fileToLoad" /> 
<button onclick="loadFileAsText()">Load</button></p>
<br>
<button type="button" onclick="saveTextAsFile()">Save</button>
<div class="metadata">
<p>UID:<br><input id="UID" type="text" ></input></p>
<p>TITLE:<br><input id="TITLE" type="text" ></input></p>
<p>TYPE:<br><input id="TYPE" type="text" value="km_task" ></input></p>
<p>SCOPE:<textarea id="SCOPE" textarea>SCOPE</textarea></p>
<p>FACET1:<select id="facet1" multiple="multiple" onchange=getFoci("facet1")>
	<option value="key1">key1</option>
	<option value="key2">key2</option>
	<option value="key3">key3</option>
</select>
<span id="facet1disp"></span>	
  FACET2:<select id="facet2" multiple="multiple" onchange=getFoci("facet2")>
 	<option value="key4">key4</option>
	<option value="key5">key5</option>
</select> 
<span id="facet2disp"></span>
 </p>
 <button type="button" onclick="popitup('kmlink.html')">kmlink</button>
 <p>KM LINKS:<textarea id="KMLINKS" textarea></textarea></p>
 <p>EXT LINKS:<textarea id="EXTLINKS" textarea></textarea></p>
 
<div>
Enter the article using markdown notation. Notice the full screen and preview buttons at the bottom of the editor box.
<div id="epiceditor"></div>
<p><button onclick="preview()">Preview</button></p>
</div> 
<div id="km_article">
</div>


</body>
</html>